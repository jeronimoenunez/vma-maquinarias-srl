---
type StatCard = {
  value: string | number;   // "24" o 24
  suffix?: string;          // "h", "%", "+"
  lead: string;             // línea 1 (gris)
  emphasis: string;         // línea 2 (negra)
};

type Props = {
  kicker?: string;
  title?: string;
  subtitle?: string;
  ctaLabel?: string;
  ctaHref?: string;
  cards?: StatCard[];
};

const fallbackCards: StatCard[] = [
  { value: "24", suffix: "h", lead: "respuesta técnica", emphasis: "para minimizar máquina parada" },
  { value: "+", suffix: "500", lead: "equipos en flota", emphasis: "listos para alquilar o comprar" },
  { value: "98", suffix: "%", lead: "disponibilidad operativa", emphasis: "planificación sin sorpresas" },
];

const {
  kicker = "UNIDADES DE NEGOCIO",
  title = "Servicios y equipos que mantienen tu operación en movimiento",
  subtitle = "Alquiler, venta y soporte técnico pensados para trabajar sin interrupciones, con foco en productividad, costos y seguridad operativa.",
  ctaLabel = "Cómo trabajamos",
  ctaHref = "#metodologia",
  cards,
} = Astro.props as Partial<Props>;

const safeCards = Array.isArray(cards) && cards.length ? cards : fallbackCards;
---

<section id="servicios" class="spRoot">
  <div class="spInner">
    <div class="spKicker">{kicker}</div>

    <h2 class="spTitle">{title}</h2>

    {subtitle && <p class="spSubtitle">{subtitle}</p>}

    <a class="spCta" href={ctaHref}>
      {ctaLabel} <span class="spArrow">→</span>
    </a>

    <div class="spGrid">
      {safeCards.map((c) => (
        <article class="spCard">
          <div class="spValue">
            <span class="spNum">{c.value}</span>
            {c.suffix && <span class="spSuffix">{c.suffix}</span>}
          </div>

          <p class="spText">
            <span class="spLead">{c.lead}</span>
            <br />
            <span class="spEmphasis">{c.emphasis}</span>
          </p>
        </article>
      ))}
    </div>
  </div>
</section>

<style>
  /* ====== AISLAMIENTO TOTAL (evita que global.css te lo rompa) ====== */
  .spRoot, .spRoot *{
    box-sizing: border-box;
    font-family: inherit;
  }
  .spRoot h2, .spRoot p{
    margin: 0;
  }
  .spRoot a{
    color: inherit;
    text-decoration: none;
  }

  /* ====== SECCIÓN ====== */
  .spRoot{
    position: relative;
    z-index: 2;

    min-height: 90vh;
    display: flex;
    align-items: center;

    background: #000000;
    padding: 120px 0;
  }

  .spInner{
    width: min(1120px, calc(100% - 48px));
    margin: 0 auto;
    text-align: center;
  }

  /* ====== HEADER COPY ====== */
  .spKicker{
    letter-spacing: 0.16em;
    text-transform: uppercase;
    font-size: 12px;
    color: rgba(255,255,255,0.60);
    margin-bottom: 12px;
  }

  .spTitle{
    font-size: clamp(28px, 3vw, 44px);
    line-height: 1.12;
    letter-spacing: -0.02em;
    color: rgba(255,255,255,0.95);
    font-weight: 600;
    /* max-width: 980px; */
    margin-bottom: 12px;
  }

  .spSubtitle{
    margin-top: 14px;
    font-size: 15px;
    line-height: 1.55;
    color: rgba(255,255,255,0.72);
    /* max-width: 880px; */
    margin-left: auto;
    margin-right: auto;
  }

  /* ====== CTA ====== */
  .spCta{
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 10px;

    margin: 28px auto 0;
    padding: 12px 18px;

    border: 1px solid rgba(255,255,255,0.55);
    border-radius: 14px;

    font-size: 14px;
    font-weight: 500;
    color: rgba(255,255,255,0.88);
    background: rgba(255,255,255,0.02);
  }

  .spCta:hover{
    background: red;
    border-color: rgba(255,255,255,0.75);
    color: #ffffff;
  }

  .spArrow{
    display: inline-block;
    font-size: 18px;
    line-height: 1;
    transform: translateY(-1px);
  }

  /* ====== GRID ====== */
  .spGrid{
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 28px;
    align-items: stretch;
    margin-top: 64px;
  }

  /* ====== CARD ====== */
  .spCard{
    background: #ffffff;
    border: 1px solid rgba(0,0,0,.08);
    border-radius: 16px;
    padding: 26px 26px 24px;
    box-shadow:
      0 20px 50px rgba(0,0,0,.45),
      0 1px 0 rgba(255,255,255,.04);
    text-align: center;
  }

  .spValue{
    display: flex;
    justify-content: center;
    align-items: baseline;
    gap: 6px;
    margin-bottom: 10px;
  }

  .spNum{
    font-size: 56px;
    line-height: 1;
    letter-spacing: -0.04em;
    color: #111111;
    font-weight: 600;
  }

  .spSuffix{
    font-size: 46px;
    color: #111111;
    font-weight: 600;
    transform: translateY(-6px);
  }

  .spText{
    font-size: 15px;
    line-height: 1.45;
    color: #6b7280;
    text-align: center;
  }

  .spEmphasis{
    color: #111111;
    font-weight: 600;
  }

  @media (max-width: 960px){
    .spRoot{ padding: 80px 0; }
    .spGrid{
      grid-template-columns: 1fr;
      gap: 16px;
      margin-top: 32px;
    }
    .spCard{ padding: 22px; }
    .spNum{ font-size: 52px; }
  }
</style>
